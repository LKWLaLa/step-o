<%= form_for(@step) do |f| %>

  <%= f.label :name, "Step Name:"%>
  <%= f.text_field :name %>
  <%= f.label :level_of_mastery, "Current level of mastery (1-10):" %>
  <%= f.text_field :level_of_mastery %>
  <%= f.label :notes, "Step Notes:" %>
  <%= f.text_area :notes %><br><br>
  <%= f.hidden_field :user_id %>
  <%= f.label :style_ids, "Associated Styles:" %><br>
  <%= f.collection_check_boxes :style_ids, Style.all, :id, :name %><br><br>

  Videos: <br><br>

  <%= f.fields_for :timemarkers do |t| %>
   <% if !t.object.persisted? %>
      Add a new video:<br><br>
    <% end %>
    <%= t.label :marker, "Timestamp:"%>
    <%= t.text_field :marker %>

    <%= t.fields_for :video do |v| %>
      <% if !v.object.persisted? %>
       <%= v.label :id, "Add a video from your collection:" %>
        <%= v.collection_select(:id, current_user.videos.order(:title), :id, :title, include_blank: true )%><br><br>
      <% end %>

      <%= v.label :title, "Title:" %>      
      <%= v.text_field :title %>
      <%= v.label :year, "Year:" %>
      <%= v.text_field :year %>
      <%= v.label :url, "URL:" %>
      <%= v.text_field :url %>
      <%= v.label :notes, "Video Notes:" %>
      <%= v.text_field :notes %><br><br>
      <%= v.hidden_field :user_id, :value => params[:user_id]  %>
    <% end %>
    <% if t.object.persisted? %>
       Remove video: <%= t.check_box :_destroy %>
      <br><br><br>
    <% end %>
  <% end %>


  <%= f.submit %>
<%end%>
  